####第13章 协议
在前一张中我们讨论了类别和非正式协议的奇妙之处。在使用非正式协议时候，可以只实现你想要获得响应的方法。我们只实现了地12掌中NSNetServiceBrowser委托对象的两个方法，这两个方法分别在新的服务加入或者离开网络时候被调用，而不必实现NSNetServiceBrowserDelegate非正式协议中的其他6个方法。我们也不必再对象中声明任何内容以表示该对象可用作NSNetServiceBrowser委托对象。所有这些任务可以用最少的代码完成。
你可能已经猜到了，OC和Cocoa还有一个正式协议的概念，本章我们就看卡正式协议是如何工作的。
#####13.1 正式协议
与非正式协议一样，正式协议是包含了方法和属性的有名称列表。但与非正式协议不同的是，正式协议要求显式地采用。采用（adopt）协议的方法是在类的@interface声明中列出协议的名称。采用协议之后，你的类就要遵守该协议（你本意为自己是个不妥协的人）。采用协议就意味着你承诺实现该协议的所有方法。否则，编译器回升长警告来提醒你。
说明，正式协议就像Java的借口一样，事实上OC的协议就是Java的借口的启发而来的。
为什么要创建和采用正式协议呢？实现协议的每一个方法都似乎需要完成大量的工作。以来协议的话，我们可能还会更忙一些。但是通常情况下，一个协议止呕少数几个需要实现的方法，你必须实现所有这些方法才能获得一系列有用的功能，因此，一般来说，正式协议的要求并不是一种负担，OC2.0中增加了一些良好的特性，使我们可以更轻松地使用协议，我么将在本章的末尾讨论这些特性。
####13.1.1 声明协议
我们来看一下由Cocoa声明的一个协议，NSCopying，如果你采用了NSCopying协议，你的对象就会知道如何创建自身的副本。
@protocol NSCopying
- (id) copyWithZone: (NSZone *) zone;
@end
声明协议的方法看起来和声明类或者类别的语法有点像，不过这里是用的不是@interface，而是使用@protocol告诉编译器：“下面将是一个新的正式协议。”@protocol后面是协议名称，协议名称必须要唯一。
你也可以继承父协议，这点雨继承父类想死，在声明语句协议名称后面的尖括号内可以指定父协议的名称
@protocol MySuperDuberProtocol <MyParentProtocol>
@end
第一行代码表示MySuperDuberProtocol协议继承于MyParentProtocol协议，因此你必须实现两个协议中所有需要实现的方法。你通常可以使用NSObject作为根协议，请不要将其与NSObject类混淆。NSObject类复合NSObject协议，这意味着所哟的对象都复合NSObject协议。将NSObject协议作为你编写的协议的父协议是一个不错的方式。
接下来是一个方法声明列表，所有采用了此协议的类都必须实现这些方法。协议声明以@end结束。在协议中不会引入新的实例变量。
我们再来看看一个例子，这是Cocoa的NSCoding协议：
@protocol NSCoding
- (void) encodeWithCoder: (NSCoder *) encoder;
- (id) initWithCoder: (NSCoder *) decoder;
@end
当某个类采用NSCoding协议时，便意味着该类承诺将实现这两个方法。encodeWithCoder：方法用于接收对象的实例变量并将其转换为NSCoder类的对象。initWithCoder：方法从NSCoder类的对象中提取经过转换雪藏的实例变量，并使用他们去时初始化新的对象，这两个方法总是成对实现的，如果你从未讲一个对象转换为另一个对象，那么对该对象进行编码是毫无意义的；如果你不催对象进行编码，那么也就不饿避风港创建的心得对象。
#####13.1.2 采用协议
要采用某个协议，你可以在类的声明中列出该协议的名称，并用尖括号括起来，。例如，car类想要采用NSCopying协议，则棋类额声明如下
@interface Car : NSObject <NSCopying>
{
//实例变量
}
// 方法
@end // Car
而乳沟car类呀哦同时采用NSCopying和NSCoding这两个协议，则棋类声明将如下
@interface Car: NSObject <NSCopying, NSCoding>
{
//实例变量
}
// 方法
@end // Car
你可以按照任意顺序列出协议，这对结果没有影响。
采用了某个协议，就相当于给阅读该类声明的编程人员传递了一条信息，表明该类的对象可以完成两个非常重要的操作：能够对自身进行编码和解码，二是可以创建自身的副本
#####13.1.3 实现协议
关于协议需要知道的就这么多（这里省略了声明变量时的一下诶语法细节，后面将要讨论这些内容）。我们准备用大量的篇幅来联系如何为CarParts项目采用NSCopying协议。
