###第20章 NSPredicate
编写软件时，经常需要获取一个对象集合，并通过某些已知条件计算该集合的值。你需要保留符合某个条件的对象，删除那些不满足条件的对象，从而提供一些有用处的对象。
在使用软件（比如iPhoto）的过程中，经常会看到这种现象。如果通知iPhoto仅显示评级为三星或者三星智商的图片，则制定条件为“照片的评级必须为三星或三星以上”。所有的照片都会经过该过滤器，满足条件的对象会通过，而其他对象则被过滤掉了。最后，iPhoto将显示出所有优秀图片。
类似的，iTunes也有自己的搜索框。如果搜索条件是歌手Marilyn Manson或者Barry Manilow的歌曲，那么所有非摇滚乐和慢板音乐都将被隐藏。这样，你就成功地创建了一个奇妙的误区混合列表。
Cocoa提供了一个名为NSPredicate的类，它用于指定过滤器文件。可以创建NSPrediacte对象，通过它准确滴描述所需的条件，通过谓词筛选每一个对象，判断他们是否与条件相匹配。
这种意义上的“谓词”与在英语语法课上学习的“谓语”大不相同，这里的谓语用在数学和计算机科学概念中，表示计算真值和假植的函数。
Cocoa用NSPredicate描述查询的方式，原理类似于在数据库中进行查询。可以再数据库风格的API中使用NSPredicate类，比如Core Data和Spotlight。在此，我们不打算介绍这两种技术（但可以将本章中的很多内容应用到这两种技术中，也可以用用到自己的对象中）。可以讲NSPredicate看成另一种间接操作方式。例如，如果需要查询满足条件的机器人，可以使用谓词对象进行检查，而不必使用代码进行显示查询。通过交换谓词对象，可以使用通用带啊对数据进行过滤，而不必对相关条件进行硬编码。这也是第三章中提到的开/闭原则的另一个应用。
####20.1 创建谓词
首先需要创建NSPredicate对象，才能将它应用于其他对象。课题通过两种基本方式来实现。第一种是创建许多对象，并将它们组合起来。这需要使用大量的代码，如果你正在构建通用用户界面来指定查询，采用这种方式比较简单。另一种方式是查询代码中的字符串，对初学者来说，这种方式比较简单，因此，本书将重点介绍查询字符串。通常建议使用面向字符串的API，尤其是在缺少编译器的错误检查和奇怪的运行时错误的时候。
创建谓词
NSPredicate *predicate;
predicate = [NSPredicate predicateWithFormat: @"name  == 'Herbie'"];
#####表达自己
正则表达式功能非常强大，它是一种指定字符串匹配逻辑的非常紧凑的方式。有时候，正则表达式的形式会变得复杂而费解，已经有大量书记讨论了这一主题。NSPredicate正则表达式使用ICU（International Components for Unicode）语法，你可以借助Internet搜索引擎了解相关内容。
虽然正则表达式功能强大，到那时计算开销也非常大。如果在谓词中有某些简单地运算度，例如基本的字符串运算符和比较运算符，那么在使用MATCHES之前可以先执行简单的运算，这样将会提高程序的运算速度。
#####20.9 结语
学完谓词之后本书的学习就到此结束了。我们已经介绍了很多方面，从间接到OOP的基础知识，一直到复杂的工具（例如键值编码和NSPredicate类过滤对象）。祝贺你坚持读完了整本书！现在，你已经正式准备好不如iOS和OS X编程生涯的下一阶段了。感谢你加入我们。
