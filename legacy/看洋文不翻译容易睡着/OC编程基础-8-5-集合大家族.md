####8.5 集合大家族
各种独立的对象聚在一起感觉很有趣，不过通常你会希望他们是井井有条的，Cocoa提供了许多集合类，如NSArray和NSDictionary

，他们的实例就是为了存储其他对象而存在的。
#####8.5.1 NSArray
你在C语言中应该用到过数组，事实上，在本书前面的内容中，我们也用到过数组来存储汽车的4个轮胎。你或许还记得在编写那段

代码时我们遇到了不少困难，比如不得不去检查数组的索引来确定它是否有效：索引既不能小于0也不能大于数组的长度。另一个问

题就是这个长度为4的数组是被硬编码近Car类的，也就是说我们的车的轮胎不能多于4个。当然，这似乎不是什么问题，但是谁知道

未来的火箭飞行器是否需要4个以上的轮胎才能够平稳降落呢？
NSArray是一个Cocoa类，用来存储对象的有序列表。你可以在NSArray中放入任意类型的对象：NSString，Car，Shape，Tire或者其

他你想要存储的对象，甚至可以是其他数组或字典对象。
只要拥有一个NSArray对象，就可以通过各种方式来操作它，比如让某个对象的实例变量指向这个数组，将该数组当做参数传递给方

法或者函数，获取数组中锁存对象的个数，提取某个索引所对应的对象，查找数组中的独享，遍历数组等等。
NSArray类有两个显示。首先，它只能存储OC的对象，而不能存储原始的C语言基础数据类型，如int，float，enum，struct和

NSArray中的随机指针。同时，你也不能在NSArray中存储nil（对象的零值或NULL值）。有很多种方法可以避开这些限制，你马上就

会看到。
可以通过类方法arrayWithObjects：创建一个新的NSArray。发送一个以逗号分隔的对象列表，在列表的结尾添加nil代表列表的结

束（顺便提一下，这就是不能再数组中存储nil的一个原因）。
NSArray *array = [NSArray arrayWithObjects: @"one", @"two", @"three", nil];
这行代码创建了一个由NSString字面量对象组成的含3个元素的数组。你也可以使用数组字面量各式来创建一个数组，它与NSString

字面量各式非常相似，区别是用方括号代替了引号，如下：
NSArray *array2= @[@"one", @"two", @"three"];
虽然array和array2对象不同，但他们的内容是一样的，而且后一种输入量明显比前一种少很多。
说明：使用字面量语法时不必再结尾处特意补上nil。
只要有了一个数组，就可以获取它所包含的对象个数。
- (NSUInteger) count;
也可以获取特定索引处的对象：
- (id)objectAtIndex:(NSUInteger)index;
通过字面量来访问数组的语法与C语言中访问数组想的语法类似。
id *myObject = array1[1];
你可以结合计数和取值功能来输出数组中的内容：
for (NSInteger i = 0; i < [array count]; i++)
{
NSLog(@"index %d has %@.", i, [array objectAtIndex:i]);
}
如果你引用的索引大于数组中对象的个数，那么Cocoa在运行时会输出错误。比如说运行以下代码。
[array objectAtIndex:208000];
array[208000];
将会出现警告：
进行Cocoa编程时，你可能会经常看到这样的提示信息，所以我们花些时间来讲解一下。在你被告知你的层序被终止这个坏消息之后，这个提示消息提到终止的原因之一是“未捕获的异常”（uncaught exception）。异常，exception是Cocoa说明“我不知道该如何处理”的方式。你有许多方法来捕获和处理代码中的异常，但是如果你只是刚刚开始学习，就没有必要这样做了。这里的异常是NSRangeException标明传递给方法的范围参数有问题。这个方法也就是NSArray类下的objectAtIndex：方法。
异常信息中最后一部分内容便是我们需要关心的，它支出我们在读取数组中索引为208000的数据，但是该数组中只有3个元素（差了不止一个数量级）。通过这条消息，我们可以追查到问题代码并且找到错误所在的位置。
查找异常产生的原因是一件令人沮丧的事情。你所获得的所有信息就是Console窗口中的内容，而GUI程序会继续运行不会停止，有一种方法可以再异常发生时让Xcode终端程序并进入调试器，这样会更方便操作。在导航栏面板中选中断点选项卡，你会看到断点以列表形式显示出来。当前我们只设置了一个端点。
如果想要添加其他断点，只需点击面板左下角的加号按钮，然后再弹出菜单中选择“Add Exception Breakpoint”选项，你将会看到另一个弹出对话框。
在设置断点之前，他会让你自定义断点的行为。举个例子，你可以让他输出错误信息或终止程序并执行一些命令，目前我们还不会做这么复杂的事情，仅仅需要让程序在异常抛出时能终止运行。完成之后点击Done按钮就能添加断点了。添加完之后，当运行程序遇到异常抛出时，调试器会终止运行并指向包含断点的那行。
你也许不会太高兴，因为仅仅是程序中数组溢出了上线就导致Cocoa有这么大的反应，但是相信我，你将来会意识到这其实是一个强大的功能，因为它可以让你捕获那些可能无法检查出来的错误。
与NSString一样，NSArray也有许多特性。例如，你可以将数组给出特定对象的位置，根绝当前数组中的元素创建心得数组，用给定的分隔符将所有的数组元素合成为一个字符串（便于创建以逗号分割的列表），或者创建已有数组的排序版本。
######切分数组
如火你曾经使用过Perl或者Python 这种脚本语言，那么可能已经习惯于将字符串切分成数组和将数组元素合并成字符串的这种操作了。NSArray也可以执行这种操作。
使用-componentsSeperatedByString:可以切分NSArray，像这样：
NSString *string = @"opp:ack:bork:greeble:ponies";
NSArray *chunks = [string componentsSeperatedByString: @":"];
还可以用componentsJoinedByString：来合并NSArray中的元素并创建字符串：
string = [chunks componentsJoinedByString: @" :- )"];
上面的代码行将会创建一个内容为“oop :- ) ack :- ) bork :- ) greeble :- ) ponies ”的NSString字符串。
